{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      editingCard: null,\n      authTab: 'login',\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      registerForm: {\n        username: '',\n        password: ''\n      },\n      authError: '',\n      registerSuccess: false,\n      loading: false,\n      isAuthenticated: false,\n      token: '',\n      board: null,\n      cardForms: {},\n      newCard: {\n        title: '',\n        description: ''\n      }\n    };\n  },\n  mounted() {\n    const storedToken = localStorage.getItem('kanban_token');\n    if (storedToken) {\n      this.token = storedToken;\n      this.isAuthenticated = true;\n      this.loadBoard();\n    }\n  },\n  watch: {\n    token(newVal) {\n      if (newVal) {\n        localStorage.setItem('kanban_token', newVal);\n      } else {\n        localStorage.removeItem('kanban_token');\n      }\n    }\n  },\n  methods: {\n    getColumnColor(columnId) {\n      const colors = ['#1abc9c', '#3498db', '#9b59b6', '#e67e22', '#e74c3c'];\n      return colors[columnId % colors.length];\n    },\n    async loadBoard() {\n      try {\n        const response = await axios.get('http://localhost:8000/api/board/', {\n          headers: {\n            Authorization: `Token ${this.token}`\n          }\n        });\n        const boards = response.data;\n        this.board = Array.isArray(boards) && boards.length > 0 ? boards[0] : null;\n        this.initCardForms();\n      } catch (error) {\n        console.error('Erro ao carregar board:', error);\n      }\n    },\n    async createBoard() {\n      try {\n        const response = await axios.post('http://localhost:8000/api/board/', {\n          name: 'Meu Quadro'\n        }, {\n          headers: {\n            Authorization: `Token ${this.token}`\n          }\n        });\n        this.board = response.data;\n        this.initCardForms();\n      } catch (error) {\n        console.error('Erro ao criar board:', error);\n      }\n    },\n    initCardForms() {\n      this.cardForms = {};\n      if (this.board && this.board.columns) {\n        this.board.columns.forEach(col => {\n          this.cardForms[col.id] = false;\n        });\n      }\n    },\n    showCardForm(columnId) {\n      this.cancelCard();\n      this.cardForms[columnId] = true;\n    },\n    cancelCard() {\n      Object.keys(this.cardForms).forEach(key => {\n        this.cardForms[key] = false;\n      });\n      this.newCard = {\n        title: '',\n        description: ''\n      };\n    },\n    isFormVisible(columnId) {\n      return this.cardForms[columnId];\n    },\n    async submitCard(columnId) {\n      if (!this.newCard.title.trim()) return;\n      try {\n        const response = await axios.post('http://localhost:8000/api/card/', {\n          title: this.newCard.title,\n          description: this.newCard.description,\n          column: columnId\n        }, {\n          headers: {\n            Authorization: `Token ${this.token}`\n          }\n        });\n        const createdCard = response.data;\n        const column = this.board.columns.find(col => col.id === columnId);\n        if (column) {\n          column.cards.push(createdCard);\n        }\n        this.cancelCard();\n      } catch (error) {\n        console.error('Erro ao adicionar card:', error);\n      }\n    },\n    startEditCard(card) {\n      this.editingCard = {\n        ...card\n      };\n    },\n    cancelEditCard() {\n      this.editingCard = null;\n    },\n    async submitEditCard() {\n      try {\n        await axios.put(`http://localhost:8000/api/card/${this.editingCard.id}/`, this.editingCard, {\n          headers: {\n            Authorization: `Token ${this.token}`\n          }\n        });\n        this.editingCard = null;\n        this.loadBoard();\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    async deleteCard(cardId) {\n      try {\n        await axios.delete(`http://localhost:8000/api/card/${cardId}/`, {\n          headers: {\n            Authorization: `Token ${this.token}`\n          }\n        });\n        this.loadBoard();\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    async login() {\n      this.loading = true;\n      this.authError = '';\n      try {\n        const response = await axios.post('http://localhost:8000/api/login/', this.loginForm);\n        this.token = response.data.token;\n        this.isAuthenticated = true;\n        await this.loadBoard();\n      } catch (error) {\n        this.authError = 'Usuário ou senha inválidos.';\n        console.error(error);\n      } finally {\n        this.loading = false;\n      }\n    },\n    async register() {\n      this.loading = true;\n      this.authError = '';\n      try {\n        await axios.post('http://localhost:8000/api/register/', this.registerForm);\n        this.registerSuccess = true;\n        this.authTab = 'login';\n      } catch (error) {\n        this.authError = 'Erro ao registrar. Tente outro nome de usuário.';\n        console.error(error);\n      } finally {\n        this.loading = false;\n      }\n    },\n    logout() {\n      this.token = '';\n      this.isAuthenticated = false;\n      this.board = null;\n      this.loginForm = {\n        username: '',\n        password: ''\n      };\n      this.registerForm = {\n        username: '',\n        password: ''\n      };\n    }\n  }\n};","map":{"version":3,"names":["axios","data","editingCard","authTab","loginForm","username","password","registerForm","authError","registerSuccess","loading","isAuthenticated","token","board","cardForms","newCard","title","description","mounted","storedToken","localStorage","getItem","loadBoard","watch","newVal","setItem","removeItem","methods","getColumnColor","columnId","colors","length","response","get","headers","Authorization","boards","Array","isArray","initCardForms","error","console","createBoard","post","name","columns","forEach","col","id","showCardForm","cancelCard","Object","keys","key","isFormVisible","submitCard","trim","column","createdCard","find","cards","push","startEditCard","card","cancelEditCard","submitEditCard","put","err","deleteCard","cardId","delete","login","register","logout"],"sources":["C:/Users/faculdade/Desktop/Kanban/Kanban/kanban-frontend/src/KanbanBoard.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      editingCard: null,\r\n      authTab: 'login',\r\n      loginForm: {\r\n        username: '',\r\n        password: '',\r\n      },\r\n      registerForm: {\r\n        username: '',\r\n        password: '',\r\n      },\r\n      authError: '',\r\n      registerSuccess: false,\r\n      loading: false,\r\n      isAuthenticated: false,\r\n      token: '',\r\n      board: null,\r\n      cardForms: {},\r\n      newCard: {\r\n        title: '',\r\n        description: '',\r\n      },\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    const storedToken = localStorage.getItem('kanban_token');\r\n    if (storedToken) {\r\n      this.token = storedToken;\r\n      this.isAuthenticated = true;\r\n      this.loadBoard();\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    token(newVal) {\r\n      if (newVal) {\r\n        localStorage.setItem('kanban_token', newVal);\r\n      } else {\r\n        localStorage.removeItem('kanban_token');\r\n      }\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    getColumnColor(columnId) {\r\n      const colors = ['#1abc9c', '#3498db', '#9b59b6', '#e67e22', '#e74c3c'];\r\n      return colors[columnId % colors.length];\r\n    },\r\n\r\n    async loadBoard() {\r\n      try {\r\n        const response = await axios.get('http://localhost:8000/api/board/', {\r\n          headers: { Authorization: `Token ${this.token}` },\r\n        });\r\n        const boards = response.data;\r\n        this.board = Array.isArray(boards) && boards.length > 0 ? boards[0] : null;\r\n        this.initCardForms();\r\n      } catch (error) {\r\n        console.error('Erro ao carregar board:', error);\r\n      }\r\n    },\r\n\r\n    async createBoard() {\r\n      try {\r\n        const response = await axios.post(\r\n          'http://localhost:8000/api/board/',\r\n          { name: 'Meu Quadro' },\r\n          { headers: { Authorization: `Token ${this.token}` } }\r\n        );\r\n        this.board = response.data;\r\n        this.initCardForms();\r\n      } catch (error) {\r\n        console.error('Erro ao criar board:', error);\r\n      }\r\n    },\r\n\r\n    initCardForms() {\r\n      this.cardForms = {};\r\n      if (this.board && this.board.columns) {\r\n        this.board.columns.forEach((col) => {\r\n          this.cardForms[col.id] = false;\r\n        });\r\n      }\r\n    },\r\n\r\n    showCardForm(columnId) {\r\n      this.cancelCard();\r\n      this.cardForms[columnId] = true;\r\n    },\r\n\r\n    cancelCard() {\r\n      Object.keys(this.cardForms).forEach((key) => {\r\n        this.cardForms[key] = false;\r\n      });\r\n      this.newCard = { title: '', description: '' };\r\n    },\r\n\r\n    isFormVisible(columnId) {\r\n      return this.cardForms[columnId];\r\n    },\r\n\r\n    async submitCard(columnId) {\r\n      if (!this.newCard.title.trim()) return;\r\n      try {\r\n        const response = await axios.post(\r\n          'http://localhost:8000/api/card/',\r\n          {\r\n            title: this.newCard.title,\r\n            description: this.newCard.description,\r\n            column: columnId,\r\n          },\r\n          { headers: { Authorization: `Token ${this.token}` } }\r\n        );\r\n        const createdCard = response.data;\r\n        const column = this.board.columns.find((col) => col.id === columnId);\r\n        if (column) {\r\n          column.cards.push(createdCard);\r\n        }\r\n        this.cancelCard();\r\n      } catch (error) {\r\n        console.error('Erro ao adicionar card:', error);\r\n      }\r\n    },\r\n\r\n    startEditCard(card) {\r\n      this.editingCard = { ...card };\r\n    },\r\n\r\n    cancelEditCard() {\r\n      this.editingCard = null;\r\n    },\r\n\r\n    async submitEditCard() {\r\n      try {\r\n        await axios.put(`http://localhost:8000/api/card/${this.editingCard.id}/`, this.editingCard, {\r\n          headers: { Authorization: `Token ${this.token}` },\r\n        });\r\n        this.editingCard = null;\r\n        this.loadBoard();\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    },\r\n\r\n    async deleteCard(cardId) {\r\n      try {\r\n        await axios.delete(`http://localhost:8000/api/card/${cardId}/`, {\r\n          headers: { Authorization: `Token ${this.token}` },\r\n        });\r\n        this.loadBoard();\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    },\r\n\r\n    async login() {\r\n      this.loading = true;\r\n      this.authError = '';\r\n      try {\r\n        const response = await axios.post('http://localhost:8000/api/login/', this.loginForm);\r\n        this.token = response.data.token;\r\n        this.isAuthenticated = true;\r\n        await this.loadBoard();\r\n      } catch (error) {\r\n        this.authError = 'Usuário ou senha inválidos.';\r\n        console.error(error);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    async register() {\r\n      this.loading = true;\r\n      this.authError = '';\r\n      try {\r\n        await axios.post('http://localhost:8000/api/register/', this.registerForm);\r\n        this.registerSuccess = true;\r\n        this.authTab = 'login';\r\n      } catch (error) {\r\n        this.authError = 'Erro ao registrar. Tente outro nome de usuário.';\r\n        console.error(error);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    logout() {\r\n      this.token = '';\r\n      this.isAuthenticated = false;\r\n      this.board = null;\r\n      this.loginForm = { username: '', password: '' };\r\n      this.registerForm = { username: '', password: '' };\r\n    },\r\n  },\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}